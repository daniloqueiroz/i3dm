#!/usr/bin/env bash
# Usage: i3dm screenctl
# Summary: change screen configuration
# Help: Configure xrandr detected screens

set -x
source ${libs_file}

cmd=${1:-udev}

if [ ${cmd} == udev ]; then
  log_i screen "udev monitor event received..."
  mons > /dev/null
  sleep 10s
elif [ ${cmd} == '--ui' ]; then
  lxrandr
  exit
fi

mons_num=$(mons | grep Monitors | awk '{print $2}')
if [ ${mons_num} -gt 1 ]; then
  log_i screen "External monitor detected"
  notify Screen "External monitor detected"
  mons -e ${MON_SIDE}
else
  log_i screen "External monitor not detected"
  notify Screen "External monitor not detected"
  mons -o
fi

feh --bg-fill --randomize ${i3dm_wallpapers_dir}/*
