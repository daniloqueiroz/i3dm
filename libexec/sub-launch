#!/usr/bin/env bash
# Usage: i3dm launch [option]
# Summary: App/file launcher & window switcher
# Help: The following options are available
# -p/pass - password store mode
# -w/window - switch window mode
# -a/app - launch app mode

set -e

source ${libs_file}

function dmenu_ddg {
    query="$(dmenu -b -i -p "websearch >")"
    [ -n "${query}" ] && exec xdg-open "https://duckduckgo.com/?q=${query}"
}


command=$1

case "$command" in
  "app" | "-a")
    i3-dmenu-desktop --dmenu='dmenu -b -i -p "run >"'
    ;;
  "pass" | "-p")
    passmenu -b -i -p "pass > "
    ;;
  "window" | "-w")
    quickswitch --dmenu='dmenu -i -p "window >" -l 3'
    ;;
  "websearch" | "-s")
    dmenu_ddg
    ;;
  *)
    log_e $APP_NAME "Missing parameter: <run|file|window>"
    ;;
esac
